<head>
    <!-- å®šä¹‰æ ‡é¢˜ -->
    <title>Coding TV Episode 1 - Timer</title>
    <!-- ä½¿ç”¨ CSS æ¥ä¿®æ”¹æ ·å¼ -->
    <style>
        body {
            text-align: center;
            padding: 100px 0 0;
            background-color: hsl(120, 70%, 60%);
            font-size: 60px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        #timer {
            margin-top: 20px;
            font-family: monospace;
            /* color: red; */
            /* color: hsl(120, 50%, 50%); */
        }
        #tiger {
            cursor: pointer;
            margin-top: 40px;
        }
        #fox {
            cursor: pointer;
        }
    </style>
</head>
<!-- å†…å®¹ -->
<body id="body">
    <div id="title">
        Coding TV - Timer
    </div>
    <div id="timer">
        20:00
    </div>
    <div id="tiger">
        ğŸ¯
    </div>
    <div id="fox">
        ğŸ¦Š
    </div>
    <script>
        let interval
        let isRunning = false

        function process() {
        // è·å–å…ƒç´ 
        const timerElement = document.getElementById("timer")
        // console.log(timerElement) // æ§åˆ¶å°æ‰“å°
        // timerElement.innerHTML = "09:59" // ä¿®æ”¹
        const currentTime = timerElement.innerHTML

        let minutes = parseInt(currentTime.split(":")[0])
        let seconds = parseInt(currentTime.split(":")[1])

        if (seconds === 0 && minutes === 0) {
            clearInterval(interval)
            isRunning = false
        } else if (seconds === 0) {
            seconds = 59
            minutes = minutes - 1
        } else {
            seconds = seconds - 1
        }

        const totalSeconds = 20 * 60
        const totalSecondsLeft = minutes * 60 + seconds
        const h = (totalSecondsLeft / totalSeconds) * 120
        
        if (minutes < 10) {
            console.log(minutes)
            minutes = "0" + minutes
        }

        if (seconds < 10) {
            seconds = "0" + seconds
        }

        timerElement.innerHTML = minutes + ":" +seconds
        // timerElement.style.color = jhsl(${h}, 50%, 50%)`
        document.getElementById("body").style.backgroundColor = `hsl(${h}, 70%, 60%)`
        }

        // æ¯ä¸€ç§’æ‰§è¡Œä¸€æ¬¡ process å‡½æ•°
        // interval = setInterval(process, 1000)

        // ç‚¹å‡»è€è™å¼€å§‹è®¡æ—¶
        document.getElementById("tiger").onclick = function() {
            if (isRunning === true) {
                clearInterval(interval)
                isRunning = false
            } else {
                interval = setInterval(process, 100)
                isRunning = true
            }
        }

        // ç‚¹å‡»ç‹ç‹¸åœæ­¢è®¡æ—¶
        // document.getElementById("fox").onclick = function() {
        //     clearInterval(interval)
        // }

        document.getElementById("fox").onclick = function() {
            if (isRunning === true) {
                clearInterval(interval)
                isRunning = false
            }
            document.getElementById("timer").innerHTML = "20:00"
        }
    </script>
</body>